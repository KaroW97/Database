
<% if(messages.created){ %>
    <div id="hideAlert" class="alert alert-<%=messages.success%>"> <%=messages.created%> </div>
<% } %>
<div class="center-main-div">
    <div class="main-div">
        <div class="content">
            <div class="visit">
              
                    <form class="find-visit"  action="/calendar" method="GET">
                        <input placeholder="Od" id="dataFrom" name="dateTimeFrom"   autocomplete="off" value="<%=searchOptions.dateTimeFrom%>"  />
                        <input placeholder="Do"id="dataTo"  name="dateTimeTo"   autocomplete="off" value="<%=searchOptions.dateTimeTo%>" />
                    </form>
            
                <button class="button_action"id ="showForm" onclick="showFormm()"><i class="fas fa-plus"></i></button>

            </div>
    
               
        
        </div>
    </div>
</div>
<form method="POST" action="/calendar/visit" >
    <div style="display: none;width: 400px;" id ="comapnyForm"  >
       
        <span id ="close"class="close" onclick="closeForm()">&times;</span>

        <input  id="myInput" type="text" placeholder="Szukaj Klienta"  autocomplete="off">
        <input  name="clients" id="hiddenInput" type="text" style="display: block;" >

        <ul id="list"  >
            <% clients.forEach(client => { %>
               <li value="<%=client.id%>" ><%=client.name%> <%=client.lastName%></li>
            <%}); %>
        </ul>
        <input  id="myInputTreatment" type="text" placeholder="Szukaj Zabiegu"  autocomplete="off">
        <input  name="treatment" id="hiddenInputTreatment" type="text" style="display: none;" >
            <ul id="listTreatment"  >
                <% treatments.forEach(treatment => { %>
                   <li value="<%=treatment.id%>" ><%=treatment.treatmentName%></li>
                <%}); %>
            </ul>
      

       
        <input id="datapickerAdd"  name ="visitDate"width="312" name="dateTime" placeholder="Data" value="<%=newVisit.visitDate  %> " autocomplete="off"/>
        <input id="timepickerFrom" onclick="$timepickerFrom.open()" name="timeFrom"  width="276" placeholder="Czas zakończenia" value="<%=newVisit.timeFrom  %>" autocomplete="off" /><br>
        <input id="timepickerTo" onclick="$timepickerTo.open()"name="timeTo" width="276" placeholder="Czas rozpoczęcia" value="<%=newVisit.timeTo  %>" autocomplete="off" />
      
        <button type="submit">Dodaj</button>
    </div>
</form>

<div class="visit-div">
    <% for(var i = 0 ; i< newVisit.length ; i++){%>
      
            <div class="visit">
               
                <p><%= newVisit[i].client != undefined ? newVisit[i].client.name :'' %> <%= newVisit[i].client != undefined? newVisit[i].client.lastName :'' %></p> 
                <p class="headerVisit">Data</p>
                <p><%= newVisit[i].visitDate == null ? '' : newVisit[i].visitDate.toISOString().split('T')[0] %></p> 
                <p class="headerVisit">Godzina</p> 
                <p><%= newVisit[i].timeFrom %>  <%=newVisit[i].timeTo%>  </p>  
                <p class="headerVisit">Zabieg</p>
                <p><%= newVisit[i].treatment== null?'':newVisit[i].treatment.treatmentName %> </p>
          
            </div>
      
    <%} %> 
</div>


<h1>Lista Zakupów</h1>
<%shoppingTwoDaysFromNow.forEach(element => {%>
    <p><%= element.transactionDate == null ? '' : element.transactionDate.toISOString().split('T')[0] %> </p>  
    <p><%= element.totalPrice %> </p>  
    <p><%= element.listName.name == null ? '' :element.listName.name %> </p>  
    <br>
<%}); %> 
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
<script src="../public/dataTimePicker.js"></script> 

