 <%- include('../partials/infoMessages.ejs') %> 

 <div class="center-main-div">
    <div class="main-div">
        <div class="content">
            <div class="visit">
                <input type="text" class="myInputSearch" name="name" placeholder="Szukaj Listy" autocomplete="off" >  

                <form class="find-visit"  action="/shopping-list" method="GET">
                    <input placeholder="Od" id="dataFrom" name="visitAfter" value="<%=searchOptions.visitAfter%>"  autocomplete="off"   />
                    <button type="submit"><i class="fas fa-search"></i></button>
                </form>

              <div class="flex-end">
                <button class="separate create-list"><i class="fas fa-plus"></i></button><!--create list-->
                <button class="separate showForm"  href="#" ><i class="fas fa-building"></i></button><!--add new company or assign-->
                <button class="separate-last delete-brand"><i class="far fa-trash-alt"></i></button><!--delete company-->
               
              </div>
           
            </div>
        </div>
        <%-include('../partials/toggleListBrandNames.ejs')%>  
    </div>
 </div>

<div class="main-div-full-content">
    <div class="main-div-center  ">
        <div class="content-div">
            <% for(var i = 0 ; i< shopping.length ; i++){%>
                <div class="visit">
                    <form method="post" action='/shopping-list/<%=shopping[i]._id%>?_method=DELETE'>
                        <button type="submit" class="close" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </form>  
                    <div class="div-element" onclick="window.location='/shopping-list/list-view/<%=shopping[i].id%>'"  >

                        <p ><%=shopping[i].listNameNew != undefined ? shopping[i].listNameNew: shopping[i].listName.name   %> </p> 
                        <p class="headerVisit">Kwota</p>
                        <p ><%=shopping[i].totalPrice== null?'-':shopping[i].totalPrice+'zł' %></p>
                        <p class="headerVisit">Transakcja</p>
                        <p><%= shopping[i].transactionDate == null ? '-' : weekdays[shopping[i].transactionDate.getDay()]+' '+shopping[i].transactionDate.toISOString().split('T')[0] %></p> 

                                         
                    </div>
                </div>   
            <%} %> 
        </div>
      
    </div>

    <div class="company-square"><p class="p-color">Zakupy</p></div>
    <div class="square-shadow"></div>
    <div class="center-shopping-list">
        <div class="shopping-list">
            <%shoppingAll.forEach(element => {%>
                <div onclick="location.href='/shopping-list/list-view/<%=element._id%>'" class="list-content">
                    <div class="date">
                        <p><%= element.transactionDate == null ? '' :   element.transactionDate.toISOString().split('T')[0] %> </p> 
                    </div>
                    <div class="shopping-price-name">
                        <div class="list-name">
                            <p class="headerVisit">Nazwa</p>
                            <p><%= element.listNameNew != undefined ? element.listNameNew :element.listName.name %> </p> 
                          
                        </div>
                        <div  class="list-price">
                            <p class="headerVisit">Cena</p>
                            <p class="last"><%= element.totalPrice %>zł </p>
                        </div>
                       
                    </div> 
                </div>
              
            
            <%}); %>
        </div>
    
    </div>
</div>

<div class="create-visit-form brand-form " id="visitForm">
    <form method="POST" action="/shopping-list/brand-name" class="center-form">
        <div  id ="comapnyForm" class="form">
            <!--onclick="closeForm()"-->
            <span id ="close"class="close" >&times;</span>
            <div class="form-content">
                <input id ="input"type="text" name="name" placeholder="Dodaj nazwe firmy" value="<%=brandName.name%>" required autofocus >
                <button type="submit">Dodaj</button>
               </div>
   
        </div>
    </form>
</div>

<!--Delete Hidden Form-->
<div class=" create-visit-form hide-delete" id="">
    <form action="/shopping-list/brand-name-delete?_method=DELETE" method="post" class="center-form" >
        
        <div class="button">
            <button type="submit"><i class="far fa-trash-alt"></i></button><!--delete company-->
        </div>
   
        <div  class="form">
            
            <span id ="close"class="close" >&times;</span>
            <div class="scroll">
                <div class="form-content">
                    <ul >
                        <% brandName.forEach((brand,index) => { %>
                            <div class="flex"  brand-id="<%=brand.id%>">
                                <li value="<%=brand.id%>" ><%=brand.name%></li>
                                <div class="checkbox" >
                                    
                                    <input type="checkbox" id="checkbox-delete-<%=index%>"name="chackboxDeleteBrand" value="<%=brand.id%>" >
                                    <label for="checkbox-delete-<%=index%>"></label>
                                
                                </div>
                                
                            </div>
                        
                        <%}); %>
                    </ul>
                </div>
            </div>    
        </div>
    </form>
</div>
<!--Create List Hidden Form-->
<div class="create-visit-form hidden-create-list" id="visitForm">
    <form method="POST" action="/shopping-list" class="center-form ">
        <div  id ="comapnyForm" class="form">
            <!--onclick="closeForm()"-->
            <span id ="close"class="close" >&times;</span>
            <div class="form-content">
                <input  class="my-input-new-list-name"type="text" name="list-name" placeholder="Podaj nazwe listy" value="<%=brandName.name%>"required autofocus autocomplete="off" >
                <input type="hidden" name="brandName">
                <input placeholder="Od" id="datapickerAdd" name="transactionDate"  autocomplete="off" required  />

                <%-include('../partials/toggleListBrandNames.ejs')%>  
                <button type="submit">Dodaj</button>
                <input   class="hiddenBrandName" type="text" style="display: none;">
                <input   class="brandState" type="text" style="display: none;">
            </div>
   
        </div>
    </form>
</div>




<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
<script src="../../public/dataTimePicker.js"></script>
<script src="../../public/toggle_main_page_list.js"></script>
